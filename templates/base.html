{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}ZUNAISHA BY ZOHAN ARTS{% endblock %}</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        /* General body styling for context */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            padding: 0;
            min-height: 100vh; /* Ensure footer is at the bottom */
            display: flex;
            flex-direction: column;
        }

        main {
            flex-grow: 1; /* Allows main content to push footer down */
            padding: 20px;
            text-align: center;
        }

        /* Top Bar */
        .top-bar {
            background-color: #000;
            color: white;
            font-size: 14px;
            padding: 5px 10px;
            text-align: center;
        }

        /* NEW Header Banner for the full-width logo */
        .header-banner-full {
            background-color: white; /* Changed to white to match the logo background */
            padding: 10px 0;
            text-align: center;
            border-bottom: 1px solid #eeeeee;
        }

        .header-banner-full img {
            max-width: 100%; /* Ensure logo is responsive and fits within the width */
            height: 230px; /* INCREASED logo size as requested */
            width: auto; /* Ensure width scales proportionally */
            display: block; /* Remove extra space below the image */
            margin: 0 auto; /* Center the image horizontally */
        }

        /* Image reset (from your original code) */
        img {
            border-width: 0px;
            border-style: none;
            border-color: initial;
            border-image: initial;
            vertical-align: middle;
        }
        
        /* === MODIFIED CSS FOR IMAGES IN CARDS === */
        /* This targets all images inside the main content area */
        main img {
            width: 100%; /* Ensure images always take up 100% of their container width */
            height: auto; /* Maintain aspect ratio to prevent distortion */
            object-fit: contain; /* Ensures the entire image is visible within its container, scaling down if necessary */
            display: block; /* Removes extra space below images */
            margin-left: auto; /* Centers images horizontally */
            margin-right: auto;
        }

        /* Responsive adjustments for the new header banner */
        @media (max-width: 768px) {
            .top-bar {
                font-size: 12px; /* Smaller font on mobile for top bar */
            }
            .header-banner-full {
                padding: 5px 0; /* Less vertical padding on smaller screens */
            }
            .header-banner-full img {
                width: 90%; /* Adjust width on smaller screens if needed */
                height: 120px; /* Adjusted mobile height for logo to be visible but not too large */
            }
        }


        /* Navbar Customizations */
        .navbar-nav {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex; /* Ensure flex for horizontal alignment */
            justify-content: center; /* Center the main menu items */
            gap: 20px; /* Space between main menu items */
        }

        .nav-item {
            position: relative; /* Crucial for positioning dropdowns */
        }

        .nav-link {
            font-size: 14px;
            text-transform: uppercase;
            text-decoration: none;
            color: #333;
            padding: 10px 15px;
            display: block;
            transition: color 0.3s ease;
        }

        .nav-link:hover {
            color: red; /* Highlight on hover */
        }

        /* Dropdown Menu Styling (Sub-menus) */
        .dropdown-menu {
            display: none; /* Hidden by default */
            position: absolute;
            top: 100%; /* Position below the parent nav-item */
            left: 0; /* Align with the left edge of the parent */
            background-color: #ffffff;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2); /* Shadow effect */
            list-style: none;
            margin: 0;
            padding: 10px 0;
            min-width: 220px; /* Adjust width as needed */
            z-index: 1000; /* Ensure it appears above other content */
            border-radius: 5px;
            animation: fadeIn 0.3s ease-out; /* Smooth fade-in animation */
        }

        /* Sub-Sub-Menu (Nested Dropdown) Styling */
        .dropdown-submenu {
            position: relative; /* Needed for positioning its own dropdown */
        }

        .dropdown-submenu .dropdown-menu {
            top: 0; /* Align with the top of the parent sub-menu item */
            left: 100%; /* Position to the right of the parent sub-menu item */
            margin-left: 5px; /* Small gap between sub-menu and sub-sub-menu */
        }

        .dropdown-item {
            text-decoration: none;
            color: #555;
            padding: 8px 20px;
            display: block;
            font-size: 0.95em;
            white-space: nowrap; /* Prevent text wrapping */
            transition: background-color 0.2s ease, color 0.2s ease;
        }

        .dropdown-item:hover {
            background-color: #f0f0f0;
            color: #333;
        }

        /* Optional: Indicator for sub-sub-menu */
        .dropdown-submenu .dropdown-item::after {
            content: '►'; /* Right arrow indicator */
            float: right;
            margin-left: 10px;
            font-size: 0.8em;
            color: #999;
        }
        .dropdown-submenu .dropdown-item:not(:hover)::after {
            content: ''; /* Hide arrow when not hovered */
        }

        /* Keyframe for fade-in animation */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Show dropdown on hover (UNCOMMENTED) */
        .nav-item:hover > .dropdown-menu {
            display: block !important;
        }

        .dropdown-submenu:hover > .dropdown-menu {
            display: block !important;
        }

        .icon-buttons {
            font-size: 18px;
            margin-left: 15px;
            color: black;
        }

        /* Footer Styles */
        .site-footer {
            background: #f2f2f2;
            color: #555;
            font-family: Arial, sans-serif;
            line-height: 1.5;
            margin-top: auto; /* Pushes footer to the bottom */
        }
        .footer-widgets {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            padding: 40px 10%;
        }
        .footer-col {
            flex: 1 1 220px;
            margin: 10px;
            text-align: center; /* Center content within each footer column */
        }
        .footer-col h4 {
            font-size: 1rem;
            letter-spacing: 0.05em;
            margin-bottom: 15px;
            color: #333;
        }
        .icon-pin { font-size: 0.9em; vertical-align: middle; }

        .footer-col p {
            font-size: 0.875rem;
            margin: 8px 0;
            text-align: center; /* Center text paragraphs in footer columns */
        }
        .links-list {
            list-style: none;
            padding: 0;
            margin: 0;
            text-align: center; /* Center links list */
        }
        .links-list li {
            margin: 6px 0;
        }
        .links-list a {
            text-decoration: none;
            color: #666;
            font-size: 0.875rem;
            transition: color 0.2s;
        }
        .links-list a:hover {
            color: #000;
        }

        /* Adjusted social icons within footer */
        .footer-col .social-icons {
            margin-top: 15px; /* Add some space above the icons */
            display: flex; /* Use flexbox for alignment */
            justify-content: center; /* Center horizontally */
            gap: 15px; /* Space between icons */
        }

        .footer-col .social-icons a {
            color: #555; /* Default color for icons */
            font-size: 1.8em; /* Slightly larger for better visibility */
            transition: color 0.3s ease, transform 0.2s ease;
        }

        .footer-col .social-icons a:hover {
            color: #800020; /* Example hover color (maroon) */
            transform: scale(1.1);
        }

        .newsletter-section {
            width: 100%;
        }

        @media (min-width: 768px) {
            .newsletter-section {
                width: 300px; /* Or flex-basis: 30%; */
            }
        }

        .footer-bottom {
            border-top: 1px solid #ddd;
            display: flex;
            justify-content: space-between;
            padding: 15px 10%;
            font-size: 0.8rem;
            color: #777;
        }
        .footer-bottom a {
            color: #333;
            text-decoration: none;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .footer-widgets {
                flex-direction: column;
                padding: 30px 5%;
            }
            .footer-bottom {
                flex-direction: column;
                gap: 8px;
                text-align: center;
            }
            /* Responsive adjustments for dropdowns on mobile */
            .navbar-nav {
                flex-direction: column;
                gap: 0;
            }
            .nav-item {
                width: 100%;
                text-align: left;
            }
            .nav-link {
                padding: 10px 20px;
            }
            .dropdown-menu {
                position: static; /* Stack dropdowns vertically on small screens */
                box-shadow: none;
                border-top: 1px solid #eee;
                border-radius: 0;
                min-width: auto;
                padding-left: 30px; /* Indent sub-menu items */
                animation: none; /* Disable animation on mobile */
            }
            .dropdown-submenu .dropdown-menu {
                left: 0;
                margin-left: 0;
                padding-left: 40px; /* Further indent sub-sub-menu */
            }
            .dropdown-submenu .dropdown-item::after {
                display: none; /* Hide arrow on mobile */
            }
        }

        /* WhatsApp Floating Icon */
        .whatsapp-icon {
            position: fixed;
            width: 60px;
            height: 60px;
            bottom: 40px;
            right: 40px;
            background-color: #25d366;
            color: #FFF;
            border-radius: 50px;
            text-align: center;
            font-size: 30px;
            box-shadow: 2px 2px 3px #999;
            z-index: 999;
            display: flex;
            justify-content: center;
            align-items: center;
            text-decoration: none;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }

        .whatsapp-icon:hover {
            background-color: #1DA851;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .whatsapp-icon i {
            margin-top: 0;
            transition: transform 0.3s ease, color 0.3s ease;
        }

        .whatsapp-icon:hover i {
            transform: scale(1.1);
            color: #E0FFE0;
        }
    </style>
    {% block extra_css %}{% endblock %}
    {% block extra_head %}{% endblock %}
</head>
<body>

    <header>
        <div class="top-bar">
            For Online Queries Call / Whatsapp: (+92) 0321 0835000 Email: <span style="color: white;">zunaishabyzohan@gmail.com</span>
        </div>
        
        {# New header banner for the full-width logo #}
        <div class="header-banner-full">
            <a href="{% url 'store:index' %}">
                <img src="{% static 'wslogo.png' %}" alt="Zunaisha by Zohan Arts Logo Banner">
            </a>
        </div>

        <nav class="navbar navbar-expand-lg navbar-light bg-white border-top border-bottom">
            <div class="container">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-center" id="mainNav">
                    <ul class="navbar-nav">
                        <li class="nav-item"><a class="nav-link" href="{% url 'store:index' %}">Home</a></li>

                        <li class="nav-item"><a class="nav-link" href="{% url 'store:page0' %}">Embroidered Pret Vol-II '25</a></li>
                        <li class="nav-item"><a class="nav-link" href="{% url 'store:page2' %}">Mid Season Sale</a></li>

                        <li class="nav-item dropdown">
                            <a href="#" class="nav-link dropdown-toggle" id="readyToWearDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Ready to Wear</a>
                            <ul class="dropdown-menu" aria-labelledby="readyToWearDropdown">
                                <li class="dropdown-submenu">
                                    <a href="#" class="dropdown-item">Luxury Formals &raquo;</a>
                                    <ul class="dropdown-menu">
                                        <li><a href="{% url 'store:revede' %}" class="dropdown-item">Rêve de Luxe '25</a></li>
                                        <li><a href="{% url 'store:jeune' %}" class="dropdown-item">Jeune Fille '24</a></li>
                                    </ul>
                                </li>
                                <li class="dropdown-submenu">
                                    <a href="#" class="dropdown-item">Wedding Formals &raquo;</a>
                                    <ul class="dropdown-menu">
                                        <li><a href="{% url 'store:weddingf' %}" class="dropdown-item">Wedding Formals vol-1 '24</a></li>
                                    </ul>
                                </li>
                                <li class="dropdown-submenu">
                                    <a href="#" class="dropdown-item">Premium Pret &raquo;</a>
                                    <ul class="dropdown-menu">
                                        <li><a href="{% url 'store:premium' %}" class="dropdown-item">Premium Pret '25</a></li>
                                    </ul>
                                </li>
                                <li class="dropdown-submenu">
                                    <a href="#" class="dropdown-item">Embroidered Pret &raquo;</a>
                                    <ul class="dropdown-menu">
                                        <li><a href="{% url 'store:epv2' %}" class="dropdown-item">Embroidered Pret vol-II '25</a></li>
                                        <li><a href="{% url 'store:ep25' %}" class="dropdown-item">Embroidered Pret '25</a></li>
                                        <li><a href="{% url 'store:ep24' %}" class="dropdown-item">Embroidered Pret vol-II '24</a></li>
                                        <li><a href="{% url 'store:e24' %}" class="dropdown-item">Embroidered Pret '24</a></li>
                                    </ul>
                                </li>
                                <li class="dropdown-submenu">
                                    <a href="#" class="dropdown-item">Basic Pret &raquo;</a>
                                    <ul class="dropdown-menu">
                                        <li><a href="{% url 'store:b25v2' %}" class="dropdown-item">Basic 25-V2</a></li>
                                        <li><a href="{% url 'store:b25v1' %}" class="dropdown-item">Basics 25-V1</a></li>
                                        <li><a href="{% url 'store:b24v3' %}" class="dropdown-item">Basics 24-V3</a></li>
                                        <li><a href="{% url 'store:b24v1' %}" class="dropdown-item">Basics 24-V1</a></li>
                                        <li><a href="{% url 'store:b23v2' %}" class="dropdown-item">Basics 23-V2</a></li>
                                        <li><a href="{% url 'store:b23v1' %}" class="dropdown-item">Basics 23-V1</a></li>
                                    </ul>
                                </li>
                                <li class="dropdown-submenu">
                                    <a href="#" class="dropdown-item">Essentials &raquo;</a>
                                    <ul class="dropdown-menu">
                                        <li><a href="{% url 'store:ess' %}" class="dropdown-item">Essentials S/S '25</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>

                        <li class="nav-item dropdown">
                            <a href="#" class="nav-link dropdown-toggle" id="coutureDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Couture</a>
                            <ul class="dropdown-menu" aria-labelledby="coutureDropdown">
                                <li class="dropdown-submenu">
                                    <a href="#" class="dropdown-item">Deluxe Couture &raquo;</a>
                                    <ul class="dropdown-menu">
                                        <li><a href="{% url 'store:dc' %}" class="dropdown-item">Deluxe couture '21</a></li>
                                    </ul>
                                </li>
                                <li class="dropdown-submenu">
                                    <a href="#" class="dropdown-item">Bridal Couture &raquo;</a>
                                    <ul class="dropdown-menu">
                                        <li><a href="{% url 'store:br2425' %}" class="dropdown-item">Bridal couture 24'25</a></li>
                                        <li><a href="{% url 'store:br2223' %}" class="dropdown-item">Bridal couture 22'23</a></li>
                                        <li><a href="{% url 'store:br2122' %}" class="dropdown-item">Bridal couture 21'22</a></li>
                                    </ul>
                                </li>
                                <li class="dropdown-submenu">
                                    <a href="#" class="dropdown-item">Wedding Couture &raquo;</a>
                                    <ul class="dropdown-menu">
                                        <li><a href="{% url 'store:wc2324' %}" class="dropdown-item">Wedding Couture 23'24</a></li>
                                    </ul>
                                </li>
                                <li class="dropdown-submenu">
                                    <a href="#" class="dropdown-item">Demi couture &raquo;</a>
                                    <ul class="dropdown-menu">
                                        <li><a href="{% url 'store:mylene23' %}" class="dropdown-item">Myléne '23</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>

                        <li class="nav-item dropdown">
                            <a href="{% url 'store:unstitched' %}" class="nav-link dropdown-toggle" id="unstitchedDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Unstitched</a>
                            <ul class="dropdown-menu" aria-labelledby="unstitchedDropdown">
                                <li><a href="{% url 'store:tsl' %}" class="dropdown-item">Talia-Summer Lawn 2025</a></li>
                                <li><a href="{% url 'store:kel' %}" class="dropdown-item">KALANI - EID LUXURY LAWN 2025</a></li>
                                <li><a href="{% url 'store:rwu' %}" class="dropdown-item">Rosalee Winter Unstitched '24</a></li>
                                <li><a href="{% url 'store:pdv' %}" class="dropdown-item">Pieno De Verde - Wedding Unstitched '24</a></li>
                                <li><a href="{% url 'store:aus' %}" class="dropdown-item">AYLIN UNSTITCHED SUMMER LAWN '24</a></li>
                                <li><a href="{% url 'store:iel' %}" class="dropdown-item">ILANA EID LUXURY LAWN 2024</a></li>
                            </ul>
                        </li>

                        <li class="nav-item"><a class="nav-link" href="{% url 'store:jewlery' %}">Jewelry</a></li>

                        <li class="nav-item dropdown">
                            <a href="{% url 'store:lookbook' %}" class="nav-link dropdown-toggle" id="lookbookDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Look Book</a>
                            <ul class="dropdown-menu" aria-labelledby="lookbookDropdown">
                                <li><a href="{% url 'store:basic25v2' %}" class="dropdown-item">Basics 25-V2</a></li>
                                <li><a href="{% url 'store:talia' %}" class="dropdown-item">Talia Summer Lawn 2025</a></li>
                                <li><a href="{% url 'store:ess255' %}" class="dropdown-item">Essentials S/S '25</a></li>
                                <li><a href="{% url 'store:ebp25' %}" class="dropdown-item">Embroidered Pret '25</a></li>
                                <li><a href="{% url 'store:rdl25' %}" class="dropdown-item">Reve-de-Luxe-25</a></li>
                                <li><a href="{% url 'store:pp25' %}" class="dropdown-item">Premium Pret 25</a></li>
                                <li><a href="{% url 'store:rws24' %}" class="dropdown-item">Rosalee Winter Unstitched 24</a></li>
                                <li><a href="{% url 'store:basicv3124' %}" class="dropdown-item">Basics V3 124</a></li>
                                <li><a href="{% url 'store:pdvwu24' %}" class="dropdown-item">Pieno De Verde Wedding Unstitched '24</a></li>
                                <li><a href="{% url 'store:wc' %}" class="dropdown-item">Wedding Couture</a></li>
                                <li><a href="{% url 'store:weddingformal' %}" class="dropdown-item">Wedding Formals</a></li>
                                <li><a href="{% url 'store:ausl' %}" class="dropdown-item">Aylin Unstitched Summer Lawn</a></li>
                                <li><a href="{% url 'store:ill' %}" class="dropdown-item">Ilana Luxury Lawn</a></li>
                                <li><a href="{% url 'store:basicv423' %}" class="dropdown-item">Basics V4 '23</a></li>
                                <li><a href="{% url 'store:jdvwu' %}" class="dropdown-item">joie de vivre wedding unstitched 2023</a></li>
                                <li><a href="{% url 'store:mv223' %}" class="dropdown-item">Mehroze V2 23</a></li>
                                <li><a href="{% url 'store:noemi' %}" class="dropdown-item">Noemei Luxury Shawl Unstitched 2023</a></li>
                                <li><a href="{% url 'store:danayah' %}" class="dropdown-item">Danayah Winter Unstitched 2022</a></li>
                                <li><a href="{% url 'store:claire' %}" class="dropdown-item">Claire de Lune Wedding Unstitched 22</a></li>
                                <li><a href="{% url 'store:p22' %}" class="dropdown-item">Premium-Pret-Vol-11-2022</a></li>
                                <li><a href="{% url 'store:demi' %}" class="dropdown-item">Demi Couture '22</a></li>
                                <li><a href="{% url 'store:heritage' %}" class="dropdown-item">Heritage Bridal '21</a></li>
                                <li><a href="{% url 'store:ves21' %}" class="dropdown-item">Vesfir 21</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <div class="d-none d-lg-flex">
                    <a href="{% url 'store:cart_detail' %}" class="icon-buttons"><i class="bi bi-bag"></i></a> {# Example URL #}
                </div>
            </div>
        </nav>
    </header>

    <main>
        {% block content %}
        {% endblock %}
    </main>

    <footer class="site-footer">
        <div class="footer-widgets">
            <div class="footer-col">
                <h4>FIND US <span class="icon-pin">📍</span></h4>
                <p><strong>Address:</strong><br>
                    ABC, Center Shop No#27 Farshi bazar uposit UK center Kashmiri gate Azam cloth market, Lahore</p>
                <p>FOR CUSTOMER SERVICES&#8239;:&#8239;11:00 AM TO 9:00 PM<br>
                    (MONDAY TO SATURDAY)<br>
                    (+92)&#8239;321 0835000</p>
                <p><strong>For Online Order Inquiries:</strong><br>
                    (Pret & Unstitch)<br>
                    Call/WhatsApp: (+92)&#8239;321 0835000<br>
                    Email: zunaishabyzohan@gmail.com</p>
            </div>

            <div class="footer-col">
                <h4>STORE HOURS</h4>
                <p><strong>MONDAY – SATURDAY:</strong><br>
                    11:00 AM – 10:00 PM</p>
                <div class="social-icons">
                    <a href="https://www.facebook.com/share/16t5RYifVW/" aria-label="Facebook"><i class="bi bi-facebook"></i></a>
                    <a href="https://www.instagram.com/zunaisha__byzohanarts?igsh=OWIxYXBtbGxqZDJv" aria-label="Instagram"><i class="bi bi-instagram"></i></a>
                    <a href="tel:+923210835000" aria-label="Call Us"><i class="bi bi-telephone-fill"></i></a>
                    <a href="https://wa.me/923210835000" aria-label="WhatsApp"><i class="bi bi-whatsapp"></i></a>
                </div>
            </div>

            <div class="footer-col">
                <h4>CUSTOMER SERVICES</h4>
                <ul class="links-list">
                    <li><a href="{% url 'store:trackorder' %}">Track Your Order</a></li>
                    <li><a href="{% url 'store:faqs' %}">FAQs</a></li>
                    <li><a href="{% url 'store:returnexchange' %}">Return & Exchange</a></li>
                    <li><a href="{% url 'store:privacypolicy' %}">Privacy Policy</a></li>
                    <li><a href="{% url 'store:shippingpolicy' %}">Shipping Policy</a></li>
                    <li><a href="{% url 'store:contact' %}">Contact Us</a></li>
                </ul>
            </div>

           <div class="newsletter-section">
                <h4>NEWSLETTER</h4>
                <p>Promotions, new products and sales. Directly to your inbox.</p>

                <form id="newsletter-form" action="" method="post" class="newsletter-form">
                    {% csrf_token %} {# Include CSRF token for Django forms #}
                    <div class="input-group"> {# This div might be specific to your styling, keep if it works #}
                        <input type="email" class="form-control" id="newsletter-email" placeholder="Email address" required>
                        <button type="submit" class="btn btn-dark" id="subscribe-button">SUBSCRIBE</button>
                    </div>
                    {# Div to display success/error messages #}
                    <div id="newsletter-message" class="mt-2" style="display: none;"></div>
                </form>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2025. Republic Zunaisha Arts. All rights reserved</p>
            <p>Developed by <a href="https://www.linkedin.com/in/ezba-maheen-1a997128a?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app" target="_blank">Ezba Maheen</a></p>
        </div>
    </footer>

    <a href="https://wa.me/923210835000" class="whatsapp-icon">
        <i class="bi bi-whatsapp"></i>
    </a>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
        document.addEventListener('DOMContentLoaded', function () {
            const dropdownDelay = 300; // milliseconds

            // Function to handle showing dropdowns with a delay
            function showDropdown(element) {
                clearTimeout(element.timeout);
                element.timeout = setTimeout(() => {
                    const dropdownMenu = element.querySelector('.dropdown-menu');
                    if (dropdownMenu) {
                        dropdownMenu.style.display = 'block';
                    }
                }, dropdownDelay);
            }

            // Function to handle hiding dropdowns with a delay
            function hideDropdown(element) {
                clearTimeout(element.timeout);
                element.timeout = setTimeout(() => {
                    const dropdownMenu = element.querySelector('.dropdown-menu');
                    if (dropdownMenu) {
                        dropdownMenu.style.display = 'none';
                    }
                }, dropdownDelay);
            }

            // Main navigation dropdowns
            document.querySelectorAll('.navbar-nav > .nav-item.dropdown').forEach(function(dropdown) {
                dropdown.addEventListener('mouseenter', function() {
                    showDropdown(this);
                });
                dropdown.addEventListener('mouseleave', function() {
                    hideDropdown(this);
                });

                // For touch devices, ensure dropdowns open on click
                dropdown.querySelector('.nav-link.dropdown-toggle').addEventListener('click', function(e) {
                    if (window.innerWidth <= 768) { // Only for mobile/tablet view
                        e.preventDefault();
                        const dropdownMenu = this.nextElementSibling;
                        if (dropdownMenu && dropdownMenu.classList.contains('dropdown-menu')) {
                            if (dropdownMenu.style.display === 'block') {
                                hideDropdown(dropdown.parentElement);
                            } else {
                                showDropdown(dropdown.parentElement);
                            }
                        }
                    }
                });
            });

            // Submenu dropdowns
            document.querySelectorAll('.dropdown-submenu').forEach(function(submenu) {
                submenu.addEventListener('mouseenter', function() {
                    showDropdown(this);
                });
                submenu.addEventListener('mouseleave', function() {
                    hideDropdown(this);
                });

                // For touch devices, ensure submenus open on click
                submenu.querySelector('.dropdown-item').addEventListener('click', function(e) {
                    if (window.innerWidth <= 768) { // Only for mobile/tablet view
                        const nextUl = this.nextElementSibling;
                        if (nextUl && nextUl.classList.contains('dropdown-menu')) {
                            e.preventDefault();
                            if (nextUl.style.display === 'block') {
                                hideDropdown(submenu);
                            } else {
                                showDropdown(submenu);
                            }
                        }
                    }
                });
            });
        });


  document.addEventListener('DOMContentLoaded', function() {
            const newsletterForm = document.getElementById('newsletter-form');
            const newsletterEmailInput = document.getElementById('newsletter-email');
            const newsletterMessageDiv = document.getElementById('newsletter-message');
            // Ensure csrfToken is retrieved from the hidden input within the form
            // Or from a meta tag if you put it globally, but for a form, within the form is typical.
            const csrfTokenElement = newsletterForm ? newsletterForm.querySelector('input[name="csrfmiddlewaretoken"]') : null;
            const csrfToken = csrfTokenElement ? csrfTokenElement.value : null;


            // Add console.log to check if elements are found
            console.log("Newsletter Form:", newsletterForm);
            console.log("Email Input:", newsletterEmailInput);
            console.log("Message Div:", newsletterMessageDiv);
            console.log("CSRF Token Element:", csrfTokenElement);
            console.log("CSRF Token Value:", csrfToken);

            // Critical element check (UPDATED to include csrfToken)
            if (!newsletterForm || !newsletterEmailInput || !newsletterMessageDiv || !csrfToken) {
                console.warn("Newsletter form elements or CSRF token not found. Subscription might not work.");
                if (newsletterMessageDiv) { // Only try to display if message div is found
                    newsletterMessageDiv.textContent = 'A problem occurred loading subscription functionality. Please try again later.';
                    newsletterMessageDiv.classList.add('text-danger');
                    newsletterMessageDiv.style.display = 'block';
                }
                return; // Stop script execution if elements are missing
            }

            newsletterForm.addEventListener('submit', function(event) {
                event.preventDefault(); // Prevent default form submission
                console.log("Newsletter form submitted (JS event listener triggered)!"); // Debugging log

                newsletterMessageDiv.style.display = 'none'; // Hide previous messages
                newsletterMessageDiv.textContent = '';
                newsletterMessageDiv.classList.remove('text-success', 'text-danger');

                const email = newsletterEmailInput.value.trim();

                if (!email) {
                    newsletterMessageDiv.textContent = 'Please enter your email address.';
                    newsletterMessageDiv.classList.add('text-danger');
                    newsletterMessageDiv.style.display = 'block';
                    return;
                }

                // Basic email format validation (more robust validation is on the server)
                if (!/\S+@\S+\.\S+/.test(email)) {
                    newsletterMessageDiv.textContent = 'Please enter a valid email address.';
                    newsletterMessageDiv.classList.add('text-danger');
                    newsletterMessageDiv.style.display = 'block';
                    return;
                }

                const formData = new FormData();
                formData.append('email', email);

                fetch('{% url "store:subscribe_newsletter" %}', {
                    method: 'POST',
                    headers: {
                        'X-CSRFToken': csrfToken,
                    },
                    body: formData,
                })
                .then(response => {
                    if (!response.ok) { // Check for HTTP errors (4xx, 5xx)
                        // Try to parse JSON error from server if available
                        return response.json().catch(() => {
                            throw new Error(`HTTP error! Status: ${response.status} - ${response.statusText}`);
                        }).then(err => {
                            throw new Error(err.error || `Server error: ${response.status}`);
                        });
                    }
                    return response.json(); // Parse successful JSON response
                })
                .then(data => {
                    console.log("Newsletter API response:", data); // Debugging log
                    if (data.success) {
                        newsletterMessageDiv.textContent = data.message;
                        newsletterMessageDiv.classList.add('text-success');
                        newsletterEmailInput.value = ''; // Clear input on success
                    } else {
                        newsletterMessageDiv.textContent = data.error || 'Subscription failed. Please try again.';
                        newsletterMessageDiv.classList.add('text-danger');
                    }
                    newsletterMessageDiv.style.display = 'block';
                })
                .catch(error => {
                    console.error('Error during newsletter subscription:', error); // Debugging log
                    newsletterMessageDiv.textContent = 'An error occurred. Please try again later.';
                    newsletterMessageDiv.classList.add('text-danger');
                    newsletterMessageDiv.style.display = 'block';
                });
            });
        }); // End of DOMContentLoaded

    </script>
    {% block extra_js %}{% endblock %}
</body>
</html>